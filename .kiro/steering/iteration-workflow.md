# イテレーションワークフロー

## 更新日時
2024年12月31日（火）

---

## 重要ルール: 自律的PDCAサイクル

**このプロジェクトでは、AIが自律的にPDCAサイクルを回し続ける。**

1. **Plan**: 課題を特定し、方針を立てる
2. **Do**: 実装を行う
3. **Check**: シミュレーションを実行し、結果を検証する
4. **Act**: レポートを作成し、次の課題を特定する

**要所での確認は不要。** とにかくサイクルを回し続け、プロジェクトを前進させる。

### 絶対に止まらないこと
- 1つのサイクルが完了したら、即座に次のサイクルを開始する
- ユーザーの確認を待たない
- 仮説が棄却されても、新しい仮説を立てて検証を続ける

### 外部フィードバックの確認
- 各PDCAサイクルのどこかで `.kiro/feedbacks/other-ai.md` を確認する
- フィードバックがあれば、それを参考にして次の方針を決める
- 読み取った後、ファイルの中身は空にする
- ファイルが空または存在しない場合は無視して続行

---

## 概要

このファイルは、シミュレーション開発のイテレーションワークフローを定義する。
検証完了後に次のステップを見つけ、実装を進めるプロセスを標準化する。

---

## ワークフロー

### Phase 1: 検証完了の確認

1. シミュレーションを実行し、結果を観測
2. 個別レポート（`YYYY-MM-DD-{topic}.md`）を作成
3. CONCLUSIONS.mdを更新（結論の追加/更新、仮説のステータス変更）

### Phase 2: 次のステップの特定

以下の優先順位で次のステップを決定:

1. **技術的負債の解消**
   - 前回指摘された懸念点
   - 未接続の機能（例: 知覚が意思決定に使われていない）
   - 定義のズレ（例: Beacon強度の計算式の不整合）

2. **検証中の仮説の検証**
   - CONCLUSIONS.mdの「仮説（検証中）」セクションを確認
   - 検証可能な仮説を選択

3. **未解決の問いへのアプローチ**
   - Q1-Q3の検証に必要な前提条件を確認
   - 前提条件が欠けていれば、それを実装

4. **活発レジームの維持・拡張**
   - 現在のパラメータで「活発」レジームに入れているか確認
   - より複雑な創発を観測できる改善を検討

### Phase 3: 非恣意性チェック

次のステップを決定する前に、以下を確認:

- [ ] 新しい公理を追加する必要があるか？
  - YES → 公理予算ルールに従い、必要性を明文化
  - NO → 既存公理の拡張として実装可能か確認
- [ ] 特定の成果を誘導していないか？
  - 「言語が生まれるように」「協力が発生するように」などの意図がないか
- [ ] 観測のみの原則に沿っているか？
  - メトリクスは目的関数ではなくログとして使用

### Phase 4: スペック作成

1. `.kiro/specs/{feature-name}/original-idea.md`にアイデアを記録
2. `requirements.md`を作成（EARS形式）
3. `design.md`を作成
4. `tasks.md`を作成

### Phase 5: 実装

1. タスクを順に実行
2. チェックポイントでテストを実行
3. 検証シミュレーションを実行

### Phase 6: 検証とレポート

1. 実装した機能の効果を検証
2. 個別レポートを作成
3. CONCLUSIONS.mdを更新
4. Phase 1に戻る

---

## 現在の状態（自動更新）

### 最新の検証結果
- **日時**: 2024-12-31
- **内容**: 情報伝達と行動の関係検証
- **結果**: H29を棄却（スキル-行動相関-0.113）。H42, H43を追加。
- **レポート**: `2024-12-31-information-behavior.md`

### 技術的負債
1. ~~maintainerの+1 hop知覚が意思決定に使われていない~~（優先度: 低）
2. ~~Beacon強度の定義が行動系と統計でズレている~~（優先度: 低）
3. ~~情報→行動の接続が不完全~~（解決済み: スキルシステムを実装、A/B比較で効果確認）
4. **イベント欠落**: LocalRunnerがslice(-100)でイベントを切り捨て（優先度: 高）
5. **レジーム探索の誤集計**: 最終tickのみ集計、累積が不完全（優先度: 高）
6. **エネルギーが負になり得る**: 死亡判定前に行動可能（優先度: 中）
7. **統計の「このtick」と「累積」が混在**: 探索/比較系で問題（優先度: 中）

### 検証待ちの仮説
- H1: 空間的クラスタ（「都市」）は自然に形成される（部分的に支持）
- H11: Maintainer密度が文明持続性を決定する
- H12: 道具効果がアーティファクト維持の主因である（部分的に支持）
- H13: 情報取得がstate充填率を飽和させる（支持）
- H14: 情報多様性は人口に比例する（支持）
- H15: 知識ボーナスの効果を高めるには、情報の「意味」が必要（支持）
- H17: スキル値が均一なのは、選択圧がかかっていないため（支持）
- H20: 人口が少ないため、遺伝的浮動が選択を上回っている（部分的に支持）
- H21: スキルボーナスが生存に与える影響が小さすぎる（部分的に支持）
- H23: スキルが低くても他の要因で補えるため、選択圧が弱い（支持）
- H24: 選択圧は存在するが、遺伝的浮動に埋もれている（支持）
- H25: 「ちょうど良い厳しさ」の環境で選択圧が最大化する（検証中）
- H26: 有効集団サイズは初期人口だけでなく、環境条件にも依存する（検証中）
- H27: 選択圧の検出には「適度な人口変動」が必要（検証中）
- H28: 協力複製は「利他的」ではなく「相互利益的」である（部分的に棄却）
- H29: 情報伝達は「言語」の前段階である（棄却）
- H30: スキルボーナスの効果は「余剰」を生み出し、文明発達を加速する（支持）
- H31: 文明発達には「臨界人口」が必要（棄却）
- H32: 小集団の方が一人当たりの生産性が高い（棄却）
- H33: 協力行動は人口規模に依存しない普遍的現象（支持）
- H34: クラスタ形成には「資源の偏り」が必要（部分的に支持）
- H35: クラスタリング係数と人口にはトレードオフがある（支持）
- H36: 文明発達には「適度な分散」が必要（検証中）
- H37: 協力複製を行う個体は「余裕のある長寿個体」（部分的に支持・部分的に棄却）
- H38: 協力複製は「エネルギー不足の長寿個体」が行う戦略（検証中）
- H39: 協力複製は「弱者の互助」として機能している（支持）

### 棄却された仮説
- H16: スキルボーナスの効果が軽微なのは、ボーナス係数が小さいため（棄却: A/B比較で有意な効果確認）
- H18: より長期のシミュレーションでは、有利なスキルパターンが選択される（棄却: 10,000 tickでも選択圧なし）
- H19: 現在のボーナス係数（0.5）では選択圧が弱すぎる（棄却: 係数2.0でも選択圧なし）
- H22: スキルボーナスは「行動効率」を上げるだけで、「生存確率」に直接影響しない（部分的に棄却: 正の選択圧が観察された）

### 次のステップ候補
1. **H40検証**: 協力率の増加が規模の経済を生み出す
2. **H36検証**: 適度な分散と文明発達の関係
3. **H42/H43検証**: 言語創発の条件（情報→行動選択の接続）
4. **Q3の深化**: 文明スコア4/4達成の条件探索

---

## 参照ファイル

- #[[file:.kiro/reports/CONCLUSIONS.md]]
- #[[file:.kiro/steering/project-rules.md]]
- #[[file:.kiro/ideas/README.md]]
