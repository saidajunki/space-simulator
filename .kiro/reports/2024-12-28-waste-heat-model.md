# 廃熱モデル導入後の検証レポート

## 日時
2024年12月28日（日）

## 概要

エネルギー会計の問題を修正し、廃熱（wasteHeat）リザーバを導入した後のシミュレーション結果を検証。

### 修正内容

1. **ゾンビ防止**: 反応で削除されたエンティティをスキップ
2. **移動コスト配線**: 質量ベースの移動コストを有効化
3. **二重コスト解消**: 複製・Artifact生成は内部でコスト処理
4. **廃熱リザーバ導入**:
   - 行動コスト → wasteHeat
   - 維持コスト → wasteHeat
   - 複製コスト → wasteHeat
   - 死亡時エネルギー → freeEnergy（物質分解で再利用可能）
   - wasteHeat → 宇宙に放散（系から消滅）

### パラメータ

| パラメータ | 値 | 説明 |
|-----------|-----|------|
| resourceRegenerationRate | 0.008 | 資源再生率（太陽エネルギー） |
| wasteHeatRadiationRate | 0.3 | 廃熱放散率（宇宙への放散） |
| maintenanceCost | 0.5 | 維持コスト/tick |
| replicationEnergyCost | 50 | 複製コスト |

## 検証条件

- nodes: 10
- entities: 20（初期）
- max-types: 10
- max-ticks: 10,000

## 検証結果

### シミュレーション比較

| seed | 最終人口 | 最終エネルギー | 平均年齢 | 特徴 |
|------|----------|----------------|----------|------|
| 42   | 26       | 464            | 2,392    | 緩やかに増加 |
| 100  | 32       | 917            | 2,338    | 増加傾向 |
| 123  | 15       | 469            | 5,234    | 安定 |
| 200  | 5        | 170            | 6,199    | 少数安定 |
| 300  | 9        | 346            | 5,531    | 安定 |
| 456  | 40+      | 979+           | -        | 増加傾向（タイムアウト） |
| 789  | 4        | 152            | 7,475    | 少数安定 |

### 観察されたパターン

1. **人口の多様性**: seedによって4〜40+体と大きく異なる
2. **安定型と増加型**: 一部のseedでは安定、一部では緩やかに増加
3. **長寿化**: 少数安定型では平均年齢が高い（5,000〜7,500）
4. **アーティファクト消滅**: 長期的にはすべて0に

## 現世界との照合

### 1. 熱力学第二法則の表現

廃熱モデルは熱力学第二法則を表現している：
- **自由エネルギー（freeEnergy）**: 仕事に使えるエネルギー
- **廃熱（wasteHeat）**: 仕事に使えないエネルギー
- **放散**: 廃熱は宇宙に放散され、系から消滅

**現実世界との対応**:
- 地球は太陽から自由エネルギーを受け取り、赤外線として宇宙に放散
- 生命活動は自由エネルギーを消費し、廃熱を生成
- 閉鎖系では自由エネルギーが枯渇し、熱的死に至る

### 2. 環境収容力の創発

人口が自然に安定するのは、環境収容力が創発しているため：
- 資源再生率（太陽エネルギー）が上限を決める
- 維持コスト + 行動コストが消費を決める
- 収容力 ≈ 再生率 / (維持コスト + 行動コスト)

**現実世界との対応**:
- 生態系の環境収容力
- マルサスの人口論
- ロジスティック成長モデル

### 3. seed依存性と歴史の偶然性

同じパラメータでもseedによって結果が大きく異なる：
- seed 789: 4体で安定（「孤島」）
- seed 456: 40体以上に増加（「繁栄」）

**現実世界との対応**:
- 歴史の偶然性（カオス理論）
- 同じ環境でも異なる進化経路
- 「なぜこうなったか」より「こうなる可能性があった」

### 4. 長寿化と世代交代のトレードオフ

少数安定型では平均年齢が高い（7,475 tick）：
- 競争が少ない → 生存しやすい
- 複製の機会が少ない → 世代交代が遅い
- 進化の速度が遅くなる可能性

**現実世界との対応**:
- 先進国での少子高齢化
- 安定環境での長寿化
- K戦略（少産多死）vs r戦略（多産多死）

## 考察・気づき

### 1. エネルギー会計の重要性

以前の実装では：
- 行動コストが消滅 → エネルギーが系から漏れる
- 行動コストがfreeEnergyに戻る → 実質コスト0で人口爆発

廃熱モデルにより：
- エネルギーは保存される（熱力学第一法則）
- 自由エネルギーは減少する（熱力学第二法則）
- 外部入力（太陽）がないと系は死滅する

### 2. 「正しい物理」が「面白い挙動」を生む

恣意的なルール（人口上限など）を追加せずに、物理法則に従うだけで：
- 人口が自然に安定
- seedによる多様性
- 長寿化と世代交代のトレードオフ

これは「最小公理アプローチ」の正しさを示唆している。

### 3. アーティファクト消滅の謎

すべてのシミュレーションでアーティファクトが最終的に0になる。原因の候補：
1. エントロピーによる劣化
2. 生成より劣化が速い
3. 相互作用が少なく、生成機会がない

### 4. 増加型seedの存在

seed 456では人口が増加し続けた。これは：
- 初期条件が「繁栄」に有利だった
- 資源再生率がまだ高すぎる可能性
- または、これが「正しい」挙動で、他のseedが「不運」だった

## 今後の観察ポイント

### 1. 増加型seedの長期挙動
seed 456を長期実行し、最終的に安定するか、爆発するかを確認

### 2. アーティファクト生成条件の確認
なぜアーティファクトが生成されないのか、条件を確認

### 3. タイプ性質の接続
harvestEfficiency/stabilityを実際の挙動に反映し、物質多様性の効果を観察

### 4. 相互作用・反応の発生状況
interactionCount/reactionCountを確認し、エンティティ間の相互作用が発生しているか確認

## 結論

廃熱モデルの導入により、シミュレーションは物理的に正しい挙動を示すようになった。
人口は自然に安定し、seedによる多様性も維持されている。

**主な成果**:
1. エネルギー会計が熱力学法則に従う
2. 人口爆発が抑制され、持続可能な系が実現
3. 恣意的なルールなしに環境収容力が創発

**残りの課題**:
1. タイプ性質（harvestEfficiency/stability）の接続
2. アーティファクト生成条件の確認
3. 相互作用・反応の発生状況の確認
