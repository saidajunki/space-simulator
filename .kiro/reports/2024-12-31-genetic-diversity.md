# H2検証: 遺伝的多様性は時間とともに減少する

## 日時
2024年12月31日（火）

## 概要
H2「遺伝的多様性は時間とともに減少する」を検証した。behaviorRuleの遺伝子（genes: 8個の閾値遺伝子）を直接分析し、時間経過に伴う多様性の変化を観察した。

## 検証方法
- 5つのseed（42, 123, 456, 789, 1000）で20,000 tickのシミュレーション
- 500 tick間隔で遺伝子の多様性を測定
- 多様性指標:
  - 平均遺伝子距離（全ペアのユークリッド距離の平均）
  - ユニークな遺伝子パターン数（0.1刻みで量子化）
  - 各遺伝子の分散

## 検証結果

### 各Seedの結果

| Seed | 初期人口 | 最終人口 | 初期遺伝子距離 | 最終遺伝子距離 | 変化率 |
|------|---------|---------|---------------|---------------|--------|
| 42 | 13 | 14 | 1.032 | 0.191 | **-81.5%** |
| 123 | 15 | 33 | 1.043 | 0.296 | **-71.7%** |
| 456 | 18 | 50 | 0.958 | 0.353 | **-63.2%** |
| 789 | 10 | 7 | 1.057 | 0.050 | **-95.3%** |
| 1000 | - | - | - | - | 絶滅 |

### 全体の傾向

- **減少**: 4/5 (80%)
- **増加**: 0/5 (0%)
- **安定**: 0/5 (0%)

### 興味深い観察

1. **閾値遺伝子（genes）の多様性は大幅に減少**
   - 全てのseedで60%以上の減少
   - 最大で95.3%の減少（Seed 789）

2. **行動重み（actionWeights）の多様性は増加傾向**
   - Seed 123: +23.8%
   - Seed 456: +64.1%
   - 閾値遺伝子と行動重みで異なる進化パターン

3. **ユニークパターン数は増加傾向**
   - 人口増加に伴いパターン数も増加
   - ただし、遺伝子間の距離は縮小

4. **人口が少ないほど多様性減少が顕著**
   - Seed 789（最終人口7）: -95.3%
   - Seed 456（最終人口50）: -63.2%

## 考察

### なぜ閾値遺伝子の多様性が減少するのか

1. **選択圧**: 生存に有利な閾値パターンが存在し、そこに収束
2. **遺伝的浮動**: 小集団では偶然により特定の遺伝子が固定
3. **創始者効果**: 初期の生存者の遺伝子が子孫に広がる

### なぜ行動重みの多様性は増加するのか

1. **突然変異の蓄積**: 行動重みは81個あり、変異の機会が多い
2. **中立進化**: 行動重みの多くは生存に直接影響しない
3. **探索的行動**: 多様な行動パターンが維持される

### 閾値遺伝子と行動重みの違い

| 特性 | 閾値遺伝子（genes） | 行動重み（actionWeights） |
|------|-------------------|-------------------------|
| 数 | 8個 | 81個 |
| 役割 | 行動の閾値を決定 | 行動選択の重みを決定 |
| 選択圧 | 強い（生存に直結） | 弱い（間接的） |
| 多様性変化 | 減少 | 増加 |

## 現世界との照合

1. **遺伝的浮動（Genetic Drift）**
   - 小集団では偶然により遺伝子頻度が変化
   - 本シミュレーションでも人口が少ないほど多様性減少が顕著

2. **選択圧と中立進化**
   - 生存に重要な遺伝子は選択圧を受ける（閾値遺伝子）
   - 中立的な遺伝子は浮動により変化（行動重み）

3. **創始者効果（Founder Effect）**
   - 初期の生存者の遺伝子が集団全体に広がる
   - 本シミュレーションでも初期の適応者の遺伝子が優勢に

## 結論

**H2を支持**: 遺伝的多様性は時間とともに減少する傾向がある。

ただし、以下の補足が必要:
- **閾値遺伝子（genes）**: 大幅に減少（選択圧が強い）
- **行動重み（actionWeights）**: 増加傾向（中立進化）
- **人口依存**: 小集団ほど多様性減少が顕著

## 今後の観察ポイント

1. **H4検証**: 長寿化は進化を遅くするか？
   - 世代交代が少ないと遺伝的変異の機会が減少
   - 平均年齢と遺伝子変化率の相関を分析

2. **選択圧の可視化**: どの遺伝子に選択圧がかかっているか
   - 各遺伝子の時系列変化を追跡
   - 生存者と死亡者の遺伝子比較

3. **人口規模と多様性の関係**: 大人口での多様性維持
   - 初期人口を増やして検証
   - 有効集団サイズと多様性の関係
