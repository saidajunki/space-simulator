# アーティファクト永続化メカニズムの検証

**日時**: 2024年12月29日（日）

---

## 概要

アーティファクト永続化機能（Prestige蓄積、Beacon誘引、Maintainerステータス）の動作を検証する。
5つの異なるseedで1000tickのシミュレーションを実行し、アーティファクトの生存パターンを観察した。

---

## 検証条件

| パラメータ | 値 |
|-----------|-----|
| ノード数 | 30 |
| 初期エンティティ数 | 50 |
| 最大タイプ数 | 10 |
| 最大tick | 1000 |
| seed | 1, 2, 3, 4, 5 |

---

## 検証結果

### 全体サマリー

| Seed | 終了理由 | 最終tick | エンティティ | アーティファクト | Total Prestige | Max Age | Maintainers |
|------|----------|----------|--------------|------------------|----------------|---------|-------------|
| 1 | maxTicks | 1000 | 6 | 20 | 968 | 999 | 3 |
| 2 | maxTicks | 1000 | 2 | 21 | 714 | 994 | 0 |
| 3 | extinction | 939 | 0 | 27 | 846 | 938 | 0 |
| 4 | maxTicks | 1000 | 6 | 30 | 1172 | 995 | 1 |
| 5 | maxTicks | 1000 | 1 | 32 | 1024 | 999 | 0 |

**平均値**:
- エンティティ: 3.0体
- アーティファクト: 26.0個
- Total Prestige: 944.8
- Max Artifact Age: 985 tick
- Maintainers: 0.8体

### エネルギー内訳

| Seed | Entity Energy | Free Energy | Waste Heat |
|------|---------------|-------------|------------|
| 1 | 165.7 | 7893.8 | 61.8 |
| 2 | 8.0 | 9014.8 | 8.2 |
| 3 | 0.0 | 8577.5 | 0.8 |
| 4 | 112.3 | 7229.9 | 39.0 |
| 5 | 11.6 | 8549.2 | 1.5 |

### 空間集中度（Gini係数）

| Seed | Spatial Gini | 解釈 |
|------|--------------|------|
| 1 | 0.167 | 軽度の集中 |
| 2 | 0.000 | 完全分散（2体のみ） |
| 3 | 0.000 | 絶滅 |
| 4 | 0.167 | 軽度の集中 |
| 5 | 0.000 | 完全分散（1体のみ） |

---

## 観察された現象

### 1. アーティファクトはエンティティより長寿

全seedで、アーティファクトの最大年齢が900 tick以上を記録。エンティティが絶滅（seed 3）しても、アーティファクトは残存した。

- **seed 3**: エンティティ0、アーティファクト27（tick 939で絶滅）
- アーティファクトの平均年齢: 721〜803 tick

これは「個体は消滅しても情報は蓄積する」という既存結論を再確認。

### 2. Prestige蓄積は機能している

Total Prestigeは714〜1172の範囲で蓄積。修復（repair）が行われるたびにPrestigeが増加し、Beacon強度に反映されている。

- Avg Beacon Strength: 26.4〜45.2
- 高Prestigeノードにアーティファクトが集中する傾向

### 3. Maintainerステータスは希少

1000 tick終了時点でMaintainerステータスを持つエンティティは0〜3体と少数。

- seed 1: 3体（最多）
- seed 2, 3, 5: 0体
- seed 4: 1体

Maintainerステータスの持続時間（10〜50 tick）に対し、修復行動の頻度が低いため、常時Maintainerである個体は少ない。

### 4. 絶滅してもアーティファクトは残る

seed 3では939 tickで絶滅したが、27個のアーティファクトが残存。これは「文明の遺跡」に相当する現象。

- 絶滅後もアーティファクトは劣化し続けるが、修復者がいないため徐々に消滅する
- 「維持者なき遺産」の運命

### 5. 道具/シェルター効果の影響

高Prestigeノードでは採取効率ボーナス（H+）とシェルター効果（S-）が観察された。

- 最大: H+37%, S-19%（seed 4, node-21）
- アーティファクトが集中するノードほど生存に有利

---

## 現世界との照合

### 文化財の永続性
アーティファクトがエンティティより長寿であることは、現実世界の文化財（建築物、書物、芸術作品）が個人の寿命を超えて存続することに対応する。

### 維持者の重要性
Maintainerが少ないとアーティファクトは徐々に劣化する。これは文化財の保存・修復に携わる専門家の重要性を示唆する。

### 遺跡の形成
絶滅後にアーティファクトが残る現象は、古代文明の遺跡が現代まで残存することに対応する。

---

## 考察・気づき

### 1. 「文化財」vs「道具」の解釈問題

現在の実装では、アーティファクトは以下の2つの役割を同時に持つ：
- **シグナル/焦点点**: Beacon誘引、Prestige蓄積
- **道具/シェルター**: 採取効率向上、維持コスト低減

後者の効果が強いと、アーティファクトは「便利だから残る」という解釈になり、「文化的価値で残る」という解釈が難しくなる。

**提案**: 道具/シェルター効果をconfigでON/OFF可能にし、A/B比較を行う。

### 2. Maintainerの+1 hop知覚が活用されていない

perception.tsでvisibleBeaconsを計算しているが、行動決定（decideAction）では直接隣接ノードのBeacon強度しか参照していない。2-hop先の情報が意思決定に反映されていない。

**提案**: MoveToBeacon行動で、visibleBeaconsを使って2-hop先の強いBeaconへ向かう選択肢を追加。

### 3. Beacon強度の定義不一致

- 行動系（calculateBeaconStrength）: `durability * log1p(prestige)`
- 統計/landscape（getLandscape）: `durability * prestige`

この不一致により、指標と実際の挙動にズレが生じている。

**提案**: 統一した計算式を使用する。

---

## 今後の観察ポイント

1. **道具効果OFF時の比較**: シグナル/焦点点のみでアーティファクトが維持されるか
2. **長期シミュレーション**: 10,000 tick以上でのPrestige分布の変化
3. **Maintainer密度と文明持続性の相関**: Maintainerが多い系は絶滅しにくいか
4. **空間クラスタの形成**: 高Prestigeノードへのエンティティ集中パターン

---

## 結論

アーティファクト永続化メカニズム（Prestige蓄積、Beacon誘引、Maintainerステータス）は基本的に機能している。アーティファクトはエンティティより長寿であり、絶滅後も「遺跡」として残存する。

ただし、道具/シェルター効果が「文化財」解釈を難しくしている点、Maintainerの+1 hop知覚が活用されていない点、Beacon強度の定義不一致は今後の改善課題である。
