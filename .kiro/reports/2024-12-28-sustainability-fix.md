# 検証レポート: 持続可能性の修正

## 日時
2024年12月28日（日）

## 概要

シミュレーション開始直後（tick 182）でエンティティが全滅する問題を調査・修正した。

---

## 問題の発見

### 症状
- 初期エンティティ数: 50
- 絶滅tick: 182
- 原因: `energy_depletion`（エネルギー枯渇）

### 根本原因分析

1. **エネルギー流入経路の欠如**
   - エンティティはエネルギーを消費する手段（移動、相互作用、複製など）を持っていた
   - しかし、環境からエネルギーを取得する手段（harvest）が実装されていなかった
   - 結果: エネルギーは一方的に減少し、必ず枯渇する

2. **閉鎖系の熱的死**
   - ノードの資源は初期値のみで、再生しなかった
   - エントロピー（散逸）により資源は減少し続ける
   - 結果: 仮にharvestがあっても、資源自体が枯渇して絶滅する

---

## 修正内容

### 公理17: 資源採取（harvest）
```typescript
// action.ts
export interface HarvestAction {
  type: 'harvest';
  amount: number;
}
```

**物理的必要性**: 生物はエネルギーを消費するだけでなく、環境から取得する必要がある。これは熱力学的に不可避。

### 公理18: 外部エネルギー入力（resource regeneration）
```typescript
// universe.ts
private regenerateResources(): void {
  const rate = this.config.resourceRegenerationRate;
  for (const node of this.space.getAllNodes()) {
    for (const [type, capacity] of node.attributes.resourceCapacity) {
      const current = node.resources.get(type) ?? 0;
      if (current < capacity) {
        const regeneration = (capacity - current) * rate;
        node.resources.set(type, current + regeneration);
      }
    }
  }
}
```

**物理的必要性**: 閉鎖系では熱力学第二法則により必ずエントロピーが増大し、熱的死に至る。地球の生態系が持続可能なのは、太陽からの外部エネルギー入力があるため。

---

## 検証結果

### 修正前
| Seed | 絶滅tick | 最終エンティティ数 |
|------|----------|-------------------|
| 42   | 182      | 0                 |

### 修正後
| Seed | 最終tick | 最終エンティティ数 | 平均年齢 | Artifact数 |
|------|----------|-------------------|----------|------------|
| 1    | 2000     | 18                | 892.8    | 83         |
| 42   | 5000     | 14                | 1577.8   | 189        |
| 123  | 2000     | 11                | 1016.3   | 70         |
| 999  | 2000     | 13                | 974.2    | 59         |
| 2024 | 2000     | 9                 | 1009.3   | 32         |

**結論**: 全seedで持続可能なシミュレーションが実現。人口は10-18で安定推移。

---

## 現世界との照合・考察

### 1. 太陽の役割の再認識

修正前のシミュレーションは「太陽のない地球」に相当していた。

- 地球の生態系は閉鎖系ではなく、太陽からの継続的なエネルギー入力がある
- このエネルギー入力がなければ、どんなに効率的な生態系でも熱的死に至る
- **気づき**: 太陽は「あって当然」ではなく、生命存続の絶対条件

### 2. 人口の自然な安定化

修正後、人口は10-18で自然に安定した。これは設計したわけではなく、創発した。

**メカニズム推測**:
- 資源再生率 vs 消費率のバランス
- 人口が増えると一人当たりの資源が減少
- エネルギー不足で複製閾値に達しにくくなる
- 自然な負のフィードバックループ

**現世界との類似**:
- 環境収容力（Carrying Capacity）の概念
- マルサスの人口論
- 捕食者-被食者モデル（ロトカ・ヴォルテラ方程式）

### 3. Artifactの蓄積

人口は安定しているが、Artifactは増加し続けている（tick 5000で189個）。

**考察**:
- エンティティは死んでもArtifactは残る
- 情報・文化の蓄積に相当
- ただし、Artifactにも劣化があるため、無限には増えない

**現世界との類似**:
- 文明の遺産（建築物、書物、技術）
- 個人は死んでも知識は残る
- ただし、維持されなければ失われる（図書館の焼失、言語の消滅）

### 4. 経路依存性の観察

同じパラメータでもseedによって結果が異なる:
- Seed 1: 18エンティティ、83 Artifact
- Seed 2024: 9エンティティ、32 Artifact

**考察**:
- 初期条件の微小な差が長期的な差を生む
- カオス理論、バタフライ効果
- 歴史は必然ではなく偶然の積み重ね

---

## 今後の観察ポイント

1. **長期シミュレーション（10万tick以上）での挙動**
   - 人口は安定し続けるか？
   - 周期的な変動は発生するか？

2. **パラメータ感度分析**
   - 資源再生率を変えると何が起きるか？
   - エントロピー率を変えると何が起きるか？

3. **空間的パターンの創発**
   - エンティティは特定のノードに集中するか？
   - 「都市」のようなクラスタは形成されるか？

4. **遺伝的多様性の変化**
   - 特定の遺伝子が優勢になるか？
   - 多様性は維持されるか？

---

## 結論

最小公理アプローチにおいて、「外部エネルギー入力」は恣意的な追加ではなく、物理的必然であることが確認された。この修正により、シミュレーションは持続可能となり、創発現象の観察が可能になった。
