# エネルギー保存則修正後の検証レポート

## 日時
2024年12月28日（日）

## 概要

エネルギー保存則を厳密化した後のシミュレーション結果を検証。
以下の修正を適用した状態での挙動を観察した：

1. **維持コストの散逸**: エネルギーを消滅させず、ノードの資源に返却
2. **死亡時のエネルギー返却**: エンティティのエネルギー + 質量エネルギー（E=mc²）を環境に返却
3. **化学反応の質量-エネルギー変換**: `energyDelta`を廃止し、質量変化からエネルギーを計算

## 検証条件

### 長期シミュレーション（run-42-1766928001082）
- seed: 42
- max-ticks: 100,000
- nodes: 30
- entities: 50
- max-types: 10

### 短期比較シミュレーション（密度増加）
| seed | nodes | entities | max-ticks | 密度（entities/node） |
|------|-------|----------|-----------|----------------------|
| 43   | 10    | 50       | 10,000    | 5.0 |
| 100  | 10    | 100      | 5,000     | 10.0 |
| 200  | 10    | 100      | 10,000    | 10.0 |
| 300  | 10    | 100      | 10,000    | 10.0 |

## 検証結果

### 長期シミュレーション（100,000 ticks）

| 指標 | tick 1 | tick 100,000 | 変化率 |
|------|--------|--------------|--------|
| エンティティ数 | 62 | 10 | -84% |
| 総エネルギー | 3,564 | 493 | -86% |
| 総質量 | 219 | 25 | -89% |
| アーティファクト | 0 | 0 | - |
| 平均年齢 | 0.77 | 99,713 | +12,950,000% |

**時系列の特徴**:
- tick 100以降、人口は10体で完全に安定
- エネルギーは490〜630の範囲で振動
- 相互作用・複製・反応はすべて0（完全静止状態）
- アーティファクトは一時的に22個まで増加したが、最終的に0に

### 短期比較シミュレーション

| seed | 最終人口 | 最終エネルギー | 最終アーティファクト | 特徴 |
|------|----------|----------------|---------------------|------|
| 43   | 6        | 253            | 0                   | 急速安定 |
| 100  | 6        | 328            | 51                  | 振動的、活発 |
| 200  | 1        | 77             | 1                   | 孤独な生存者 |
| 300  | 3        | 126            | 0                   | 安定共存 |

## 現世界との照合

### 1. 環境収容力（Carrying Capacity）
現在のパラメータでは、環境収容力が非常に低い（1〜10体程度）。
これは現実世界の「限界集落」や「孤島の生態系」に類似。

**対応する現象**:
- 離島の固有種（少数で安定）
- 限界集落（人口減少後の安定）
- 宇宙ステーション（少人数での持続）

### 2. 熱力学的平衡
エネルギー保存則を厳密化した結果、系は「熱力学的平衡」に近い状態に収束。
- 資源再生（外部入力）= 維持コスト（散逸）
- 複製に回すエネルギーがない

**対応する現象**:
- 定常状態の生態系
- 成熟した森林（成長と腐敗が均衡）

### 3. 「最後の1体」現象（seed=200）
100体から1体に減少し、その1体が10,000tick生存。
競争相手がいなくなると、資源を独占でき安定する。

**対応する現象**:
- 絶滅危惧種の最後の個体
- 独占市場の安定性
- 「勝者総取り」後の均衡

## 考察・気づき

### 1. エネルギー保存則の効果
修正前と比較して、系全体のエネルギーが大幅に減少（3,564 → 493）。
これは「エネルギーが無から生まれない」ことの帰結。

**以前の問題点**:
- 維持コストでエネルギーが消滅 → 系からエネルギーが漏れる
- 死亡時にエネルギーが消滅 → 同上
- 化学反応で`energyDelta`が直接加算 → 無からエネルギーが生まれる

**修正後**:
- エネルギーは形を変えるだけで総量は保存
- 外部入力（資源再生）のみがエネルギー源

### 2. 人口減少の原因
初期の大量死（100体 → 数体）の原因は：
1. **資源の奪い合い**: 密度が高いと一人当たり資源が少ない
2. **維持コストの負担**: エネルギーが足りず死亡
3. **複製の停止**: 余剰エネルギーがないため増えない

### 3. アーティファクト消滅の原因
以前は蓄積していたアーティファクトが0になった理由：
1. **エントロピーによる劣化**: 維持コストで消滅
2. **化学反応での消費**: 反応の材料として使われた可能性
3. **生成の停止**: 相互作用がないため新規生成されない

### 4. 「静止状態」の意味
tick 100以降、相互作用・複製・反応がすべて0。
これは「生きているが活動していない」状態。

**解釈**:
- 生存に必要な最低限のエネルギーしかない
- 余剰がないため、複製も相互作用もできない
- 「生存」と「繁栄」は異なる

## 今後の観察ポイント

### 1. 資源再生率の調整
現在の資源再生率では環境収容力が低すぎる。
再生率を上げて、より活発な系を観察したい。

### 2. 維持コストの調整
維持コストが高すぎる可能性。
下げることで複製の余地が生まれるか検証。

### 3. 密度と相互作用の関係
ノード数を減らして密度を上げても、相互作用は増えなかった。
相互作用の発生条件を再確認する必要がある。

### 4. 複製閾値の確認
複製に必要なエネルギー閾値が高すぎる可能性。
現在の設定値を確認し、調整を検討。

## 結論

エネルギー保存則の厳密化により、シミュレーションは物理的に正しい挙動を示すようになった。
しかし、現在のパラメータでは系が「生存ギリギリ」の状態に収束し、創発的な現象（複製、相互作用、アーティファクト蓄積）が観察されない。

**次のステップ**:
1. パラメータ調整（資源再生率↑、維持コスト↓）
2. 相互作用の発生条件の確認
3. より活発な系での長期観察
